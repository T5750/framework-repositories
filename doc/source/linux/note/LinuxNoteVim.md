# Linux笔记 Chapter 3

[PREV 2.x 常用命令](LinuxNoteCommands.md) | [NEXT 4.x 用户管理](LinuxNoteUser.md)

## 3.1 vi/vim
vi/vim是一个功能强大的全屏幕文本编辑器，也是Linux最常用的文本编辑器，作用是建立、编辑、显示文本文件。vi/vim没有菜单，只能依靠命令去操作。

## 3.2 vi/vim工作模式图
![viVimModel-min](https://www.wailian.work/images/2019/02/13/viVimModel-min.png)

## 3.3 插入模式
aio，就是vi/vim的插入模式

命令 | 作用
---|------
a | 在光标后附加文本
A | 在本行行末附加文本
i | 在光标前插入文本
I | 在本行开始插入文本
o | 在光标下插入新行
O | 在光标上插入新行

## 3.4 定位命令
- set number：设置行号（set nu）
- set nonu：取消行号
- 如果想选择跳转到指定行，直接进入编辑模式：输入行号即可

命令 | 作用
---|-----
h、方向左键 | 左移一个字符
j、方向下键 | 下移一行
k、方向上键 | 下移一行
l、方向右键 | 右移一个字符
$ | 移至行尾
0 | 移至行首

命令 | 作用
---|-----
H | 移至屏幕上端
M | 移至屏幕中央
L | 移至屏幕下端

## 3.5 删除命令

命令 | 作用
---|-----
x | 删除光标所在处字符
nx | 删除光标所在处后n个字符
dd | 删除光标所在行，ndd删除n行
dG | 删除光标所在行到末尾的内容
D | 删除从光标所在处到行尾
:n1,n2d | 删除指定范围的行

## 3.6 复制和粘贴

命令 | 作用
---|-----
yy、Y | 复制当前行
nyy、nY | 复制当前行以下n行
dd | 剪切当前行
ndd | 剪切当前行以下n行
p、P | 粘贴在当前光标所在行下或行上

## 3.7 替换和搜索

命令 | 作用
---|-----
r | 取代光标所在处字符
R | 从光标所在处开始替换字符，按Esc结束
u | 取消上一步操作

命令 | 作用
---|-----
/string | 向前搜索指定字符串，搜索时忽略大小写：set ic
n | 搜索指定字符串的下一个出现位置
:%s/old/new/g | 全文替换指定字符串
:n1,n2s/old/new/g | 在一定范围内替换指定字符串

## 3.8 保存和退出

命令 | 作用
---|-----
:w | 保存修改
:w new_filename | 另存为指定文件
:wq | 保存修改并退出
ZZ | 快捷键，保存修改并退出
:q! | 不保存修改退出
:wq! | 保存修改并退出（文件所有者可忽略文件的只读属性）

## 3.9 自定义快捷键
`map ctrl+v+自定义按键`：设置自定义快捷健，比如需要把文本内容进行注释，Linux里面使用#进行注释，那么就自定义一个注释的快捷健。可以定义很多快捷健，方便使用
- 在行首添加注释（#）：`map ctrl+v+m l#<ESC>`
- 去掉行首的注释（#）：`map ctrl+v+n 0x`
- 注意：误操作，强制关闭vi/vim时，所关闭的文件会显示：
	```
	E325: ATTENTION
	Found a swap file by the name ".out.log.swp"
	owned by root...
	```
- 需要删除一些相关的临时文件，注意是以"."开头的即可

[PREV 2.x 常用命令](LinuxNoteCommands.md) | [NEXT 4.x 用户管理](LinuxNoteUser.md)